import{c as l,a as e,b as v,n as _,d as u,F as f,r as A,w,v as D,t as p,j as h,o as r,k as g,f as x,g as I}from"./index.bc6eedd3.js";import{_ as b}from"./_plugin-vue_export-helper.cdc0426e.js";const L={data(){return{listViewActive:!0,activityList:[],filteredActivityList:[],addActivivityOpen:!1,editActivivityOpen:!1,deletedActivity:!1,formData:{activity_Id:0,name:null,description:null,price_PP:null},filterValue:"",equipmentList:[],filteredEquipmentList:[],focuedOnDropDown:!1,filerEquipment:null}},components:{},watch:{filterValue:function(t){this.filteredActivityList=this.activityList.filter(o=>{var d=o.price_PP.toString();return o.name.includes(t)||o.description.includes(t)||d.includes(t)})},filerEquipment:function(t){this.filteredEquipmentList=this.equipmentList.filter(o=>o.name.includes(t))}},computed:{},methods:{setDropDownClosed(){setTimeout(()=>{this.focuedOnDropDown=!1},200)},filterFunction(){this.filteredEquipmentList},changeViews(){this.listViewActive=!this.listViewActive},setList(){this.listViewActive=!0},setGrid(){this.listViewActive=!1},getActivityList(){var s=this,t=o=>{s.activityList=o,s.filteredActivityList=s.activityList};this.$AjaxGet("Admin/ListActivities",t)},addNewActivity(){this.addActivivityOpen=!0},cancelAdd(){this.addActivivityOpen=!1,this.editActivivityOpen=!1},addNewItem(){var s=this,t={activity_Id:this.formData.activity_Id,name:this.formData.name,description:this.formData.description,price_PP:parseFloat(this.formData.price_PP)},o=d=>{d&&(s.getActivityList(),s.cancelAdd())};this.$AjaxGet("Admin/AddActivity",t,o)},activitySelected(s){this.deletedActivity||(this.getEquipmentList(s.activity_Id),this.formData.activity_Id=s.activity_Id,this.formData.name=s.name,this.formData.description=s.description,this.formData.price_PP=s.price_PP,this.addActivivityOpen=!0,this.editActivivityOpen=!0)},updateActivity(){var s=this,t={activity_Id:this.formData.activity_Id,name:this.formData.name,description:this.formData.description,price_PP:parseFloat(this.formData.price_PP)},o=d=>{d&&(s.getActivityList(),s.cancelAdd())};this.$AjaxGet("Admin/UpdateActivity",t,o)},confirmDelete(s,t){this.deletedActivity=!0,this.$swal.fire({title:`Are you sure you want to Delete ${t} ?`,showDenyButton:!0,showCancelButton:!1,confirmButtonText:"Don't Delete",denyButtonText:"Delete"}).then(o=>{o.isConfirmed?this.$swal.fire(`${t} was not deleted`,"","info"):o.isDenied&&(this.$swal.fire(`Deleted ${t}`,"","success"),this.deleteActivity(s))})},deleteActivity(s){var t=o=>{this.getActivityList(),this.deletedActivity=!1};this.$AjaxGet(`Admin/DeleteActivity?activity_Id=${s}`,t)},getEquipmentList(s){var t=this,o=d=>{t.equipmentList=d,t.filteredEquipmentList=t.equipmentList};this.$AjaxGet(`Admin/ListActivityEquipment?activity_Id=${s}`,o)},addEquipment(s){var t=this.equipmentList.findIndex(n=>n.equipment_Id==s);this.equipmentList[t].activity_Id=this.formData.activity_Id,this.filteredEquipmentList=this.equipmentList;var o={equipment_Id:s,activity_Id:this.formData.activity_Id},d=n=>{};this.$AjaxPost("Admin/AddActivityEquipment",o,d)},confirmDeleteEquipment(s,t){this.deletedActivity=!0,this.$swal.fire({title:`Are you sure you want to Delete ${t} ?`,showDenyButton:!0,showCancelButton:!1,confirmButtonText:"Don't Delete",denyButtonText:"Delete"}).then(o=>{o.isConfirmed?this.$swal.fire(`${t} was not deleted`,"","info"):o.isDenied&&(this.$swal.fire(`Deleted ${t}`,"","success"),this.removeEquipment(s))})},removeEquipment(s){var t=this.equipmentList.findIndex(n=>n.equipment_Id==s);this.equipmentList[t].activity_Id=null,this.filteredEquipmentList=this.equipmentList;var o={equipment_Id:s,activity_Id:this.formData.activity_Id},d=n=>{};this.$AjaxPost("Admin/DeleteActivityEquipment",o,d)}},mounted(){this.getActivityList()}},k={class:"app-content-header"},q=e("h1",{class:"app-content-headerText"},"Activity",-1),P={key:0,class:"app-content-actions"},V={class:"app-content-actions-wrapper"},E=x('<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-list"><line x1="8" y1="6" x2="21" y2="6"></line><line x1="8" y1="12" x2="21" y2="12"></line><line x1="8" y1="18" x2="21" y2="18"></line><line x1="3" y1="6" x2="3.01" y2="6"></line><line x1="3" y1="12" x2="3.01" y2="12"></line><line x1="3" y1="18" x2="3.01" y2="18"></line></svg>',1),C=[E],B=x('<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-grid"><rect x="3" y="3" width="7" height="7"></rect><rect x="14" y="3" width="7" height="7"></rect><rect x="14" y="14" width="7" height="7"></rect><rect x="3" y="14" width="7" height="7"></rect></svg>',1),O=[B],S={class:"products-header"},N={class:"product-cell image"},T=h(" Name "),j={class:"sort-button"},F={class:"product-cell image"},G=h(" Description "),U={class:"sort-button"},z={class:"product-cell image"},M=h(" Price "),H={class:"sort-button"},R={class:"product-cell image"},J=h(" Attending "),K={class:"sort-button"},Q=e("div",{class:"product-cell image"},null,-1),W=["onClick"],X={class:"product-cell category"},Y={class:"product-cell category"},Z={class:"product-cell category"},$={class:"product-cell category"},tt={key:0},et={key:1},it={class:"product-cell"},st=["onClick"],nt={key:2},ot={class:"Input-Section"},ct={for:"name",class:"inp"},lt=e("span",{class:"label"},"Name",-1),rt=e("span",{class:"focus-bg"},null,-1),dt={for:"description",class:"inp"},at=e("span",{class:"label"},"Description",-1),ut=e("span",{class:"focus-bg"},null,-1),pt={for:"price",class:"inp"},vt=e("span",{class:"label"},"Price PP",-1),ht=e("span",{class:"focus-bg"},null,-1),mt={class:"dropdown"},_t={id:"myDropdown",class:"dropdown-content"},yt=["onClick"],ft={style:{"margin-top":"20px",color:"white"}},At={class:"products-header"},wt={class:"product-cell image"},Dt=h(" Name "),gt={class:"sort-button"},xt={class:"product-cell image"},It=h(" Broken "),bt={class:"sort-button"},Lt=e("div",{class:"product-cell image"},null,-1),kt={class:"product-cell category"},qt={class:"product-cell category"},Pt={class:"product-cell"},Vt=["onClick"],Et={class:"right-side"};function Ct(s,t,o,d,n,c){const a=I("vue-feather");return r(),l("div",null,[e("div",k,[q,n.addActivivityOpen?v("",!0):(r(),l("button",{key:0,onClick:t[0]||(t[0]=(...i)=>c.addNewActivity&&c.addNewActivity(...i)),class:"app-content-headerButton"}," Add Activity "))]),n.addActivivityOpen?v("",!0):(r(),l("div",P,[e("input",{onInput:t[1]||(t[1]=i=>n.filterValue=i.target.value),class:"search-bar",placeholder:"Search...",type:"text"},null,32),e("div",V,[e("button",{onClick:t[2]||(t[2]=(...i)=>c.setList&&c.setList(...i)),class:_(["action-button list",n.listViewActive?"active":""]),title:"List View"},C,2),e("button",{onClick:t[3]||(t[3]=(...i)=>c.setGrid&&c.setGrid(...i)),class:_(["action-button grid",n.listViewActive?"":"active"]),title:"Grid View"},O,2)])])),n.addActivivityOpen?v("",!0):(r(),l("div",{key:1,class:_(["products-area-wrapper",n.listViewActive?"tableView":"gridView"])},[e("div",S,[e("div",N,[T,e("button",j,[u(a,{class:"small-Icon",type:"arrow-up",size:"36px"})])]),e("div",F,[G,e("button",U,[u(a,{class:"small-Icon",type:"arrow-up"})])]),e("div",z,[M,e("button",H,[u(a,{class:"small-Icon",type:"arrow-up"})])]),e("div",R,[J,e("button",K,[u(a,{class:"small-Icon",type:"arrow-up"})])]),Q]),(r(!0),l(f,null,A(n.filteredActivityList,(i,m)=>(r(),l("div",{class:"products-row ItemBelow",key:m,onClick:g(y=>c.activitySelected(i),["prevent"])},[e("div",X,[e("span",null,p(i.name),1)]),e("div",Y,[e("span",null,p(i.description),1)]),e("div",Z,[e("span",null,"R"+p(i.price_PP),1)]),e("div",$,[i.attending?(r(),l("span",tt,p(i.attending),1)):(r(),l("span",et,"0"))]),e("div",it,[e("button",{class:"sort-button ItemAbove",onClick:g(y=>c.confirmDelete(i.activity_Id,i.name),["prevent"])},[u(a,{type:"trash-2",size:"24"})],8,st)])],8,W))),128))],2)),n.addActivivityOpen?(r(),l("div",nt,[e("div",ot,[e("label",ct,[w(e("input",{"onUpdate:modelValue":t[4]||(t[4]=i=>n.formData.name=i),onInput:t[5]||(t[5]=i=>n.formData.name=i.target.value),type:"text",id:"name",placeholder:"\xA0"},null,544),[[D,n.formData.name]]),lt,rt]),e("label",dt,[w(e("textarea",{cols:"20","onUpdate:modelValue":t[6]||(t[6]=i=>n.formData.description=i),onInput:t[7]||(t[7]=i=>n.formData.description=i.target.value),type:"text",id:"description",placeholder:"\xA0"},null,544),[[D,n.formData.description]]),at,ut]),e("label",pt,[w(e("input",{"onUpdate:modelValue":t[8]||(t[8]=i=>n.formData.price_PP=i),onInput:t[9]||(t[9]=i=>n.formData.price_PP=i.target.value),type:"text",id:"price",placeholder:"\xA0"},null,544),[[D,n.formData.price_PP]]),vt,ht])]),e("div",mt,[e("div",_t,[e("input",{onInput:t[10]||(t[10]=i=>n.filerEquipment=i.target.value),onFocusin:t[11]||(t[11]=i=>n.focuedOnDropDown=!0),onFocusout:t[12]||(t[12]=(...i)=>c.setDropDownClosed&&c.setDropDownClosed(...i)),class:"inputActiveHere",type:"text",placeholder:"Add Equipment..",id:"myInput"},null,32),(r(!0),l(f,null,A(n.filteredEquipmentList.filter(i=>!i.activity_Id),(i,m)=>(r(),l("div",{key:m},[e("a",{onClick:y=>c.addEquipment(i.equipment_Id),class:_(n.focuedOnDropDown?"show":""),href:"#"},p(i.name),11,yt)]))),128))])]),e("h2",ft," Equipment Allocated to "+p(this.formData.name),1),e("div",{class:_(["products-area-wrapper",n.listViewActive?"tableView":"gridView"]),style:{height:"fit-content","margin-bottom":"20px"}},[e("div",At,[e("div",wt,[Dt,e("button",gt,[u(a,{class:"small-Icon",type:"arrow-up",size:"36px"})])]),e("div",xt,[It,e("button",bt,[u(a,{class:"small-Icon",type:"arrow-up"})])]),Lt]),(r(!0),l(f,null,A(n.equipmentList.filter(i=>i.activity_Id),(i,m)=>(r(),l("div",{class:"products-row ItemBelow",key:m},[e("div",kt,[e("span",null,p(i.name),1)]),e("div",qt,[e("span",null,p(i.broken),1)]),e("div",Pt,[e("button",{class:"sort-button ItemAbove",onClick:g(y=>c.confirmDeleteEquipment(i.equipment_Id,i.name),["prevent"])},[u(a,{type:"trash-2",size:"24"})],8,Vt)])]))),128))],2),e("div",Et,[e("button",{class:"app-content-cancelButton mr-2",onClick:t[13]||(t[13]=(...i)=>c.cancelAdd&&c.cancelAdd(...i))}," Cancel "),n.editActivivityOpen?v("",!0):(r(),l("button",{key:0,class:"app-content-headerButton",onClick:t[14]||(t[14]=(...i)=>c.addNewItem&&c.addNewItem(...i))}," Add ")),n.editActivivityOpen?(r(),l("button",{key:1,class:"app-content-headerButton",onClick:t[15]||(t[15]=(...i)=>c.updateActivity&&c.updateActivity(...i))}," Update ")):v("",!0)])])):v("",!0)])}const St=b(L,[["render",Ct]]);export{St as default};
